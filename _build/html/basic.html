

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>基礎 &mdash; Groovy memo</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Groovy memo" href="index.html" />
    <link rel="next" title="関数型プログラミング" href="groovy_functional.html" />
    <link rel="prev" title="GroovyインストールとEmacsへのgroovy-mode設定" href="setup_groovy_emacs.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="groovy_functional.html" title="関数型プログラミング"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="setup_groovy_emacs.html" title="GroovyインストールとEmacsへのgroovy-mode設定"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Groovy memo</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="id1">
<h1><a class="toc-backref" href="#id23">基礎</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#id1" id="id23">基礎</a><ul>
<li><a class="reference internal" href="#id2" id="id24">記述と実行</a></li>
<li><a class="reference internal" href="#id3" id="id25">ライブラリのインポート</a></li>
<li><a class="reference internal" href="#groovy-jdk" id="id26">Groovy JDK</a></li>
<li><a class="reference internal" href="#groovy" id="id27">Groovy の文法について</a></li>
<li><a class="reference internal" href="#id6" id="id28">リテラル、変数、型</a></li>
<li><a class="reference internal" href="#id14" id="id29">演算子</a></li>
<li><a class="reference internal" href="#id20" id="id30">制御構造</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h2><a class="toc-backref" href="#id24">記述と実行</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Groovyでは、メソッドやクラスのブロックの外側に、実行文を記述できる。（これを「スクリプト」という）</p>
<p>スクリプトは、コンパイル時には自動生成されたmainメソッドから呼ばれる。従って、Javaとは異なり、mainメソッドを記述する必要はない。</p>
<p>コマンドライン引数は、<tt class="docutils literal"><span class="pre">args</span></tt>という暗黙定義されたString配列から取得できる。</p>
<p>記述したソースコードは、そのままgroovyインタプリタで実行できる。また、<tt class="docutils literal"><span class="pre">groovyc</span></tt>コマンドで、classファイルにコンパイルすることもできる。</p>
</div>
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id25">ライブラリのインポート</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Javaと同様、外部のライブラリを呼び出すにはimport文で使用するパッケージまたはクラスを宣言する。Groovyでは、以下のimportは暗黙的に定義されており、記述を省略できる。</p>
<ul class="simple">
<li>java.lang.*</li>
<li>java.io.*</li>
<li>java.net.*</li>
<li>java.util.*</li>
<li>groovy.lang.*</li>
<li>groovy.util.*</li>
<li>java.math.BigDecimal</li>
<li>java.math.BigInteger</li>
</ul>
</div>
<div class="section" id="groovy-jdk">
<h2><a class="toc-backref" href="#id26">Groovy JDK</a><a class="headerlink" href="#groovy-jdk" title="Permalink to this headline">¶</a></h2>
<p>Groovyで標準的に利用するクラスは、JavaAPIに含まれているものをそのまま利用するが、各クラスにはGroovy独自のメソッドやプロパティが追加され、より高機能になっている。</p>
<p>例えば、Groovyにおけるリストは、Javaと同様java.util.List型となるが、Javaにはない高階関数によるフィルタ、各要素への関数適用、等のメソッドが利用できる。</p>
<p>Groovy JDKで拡張されているクラスのAPIリファレンスは以下。</p>
<p><a class="reference external" href="http://groovy.codehaus.org/groovy-jdk/">http://groovy.codehaus.org/groovy-jdk/</a></p>
</div>
<div class="section" id="groovy">
<h2><a class="toc-backref" href="#id27">Groovy の文法について</a><a class="headerlink" href="#groovy" title="Permalink to this headline">¶</a></h2>
<p>Groovyは、基本的にJavaのソースコードをそのまま読み込ませても動作する。</p>
<p>一方で、動的型付け言語らしい簡略記法や、第一級関数（クロージャ）のような仕組みを取り入れており、Javaよりも大幅に少ないコード量で同様の機能が実現できるようになっている。</p>
<div class="section" id="id4">
<h3>括弧、セミコロンの省略<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Groovyでは、一行に複数の文を書かない限り、文末のセミコロンは省略できる。また、メソッドの引数リストを括る括弧も、構文解析に支障がない限りは省略できる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="c1">// 以下は全て同じ意味</span>
<span class="n">println</span><span class="o">(</span><span class="s2">&quot;hello&quot;</span><span class="o">);</span>
<span class="n">println</span><span class="o">(</span><span class="s2">&quot;hello&quot;</span><span class="o">)</span>
<span class="n">println</span> <span class="s2">&quot;hello&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>型記述の省略<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Groovyでは、型の記述はほとんど省略できる。この場合は多くの動的型付け言語と同様、静的な型チェックは行われない。(Scalaのような型推論によるチェックは行われないので注意)</p>
<p>Java同様の型記述を行う場合は、型チェックが行われる。</p>
<p>なお、Javaで書かれたのメソッドをオーバーライドする場合、戻り値の型を明記し、継承元のメソッドと一致させないとコンパイルエラーとなる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="c1">// 変数宣言の例</span>
<span class="kt">def</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;test&quot;</span>
<span class="n">Integer</span> <span class="n">b</span>   <span class="c1">// この場合、bに文字列等を代入しようとするとエラーとなる。</span>

<span class="c1">// メソッド宣言の例(引数と戻り値の型を省略）</span>
<span class="kt">def</span> <span class="nf">hello</span><span class="o">(</span><span class="n">name</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">println</span><span class="o">(</span><span class="s2">&quot;hello &quot;</span> <span class="o">+</span> <span class="n">name</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id6">
<h2><a class="toc-backref" href="#id28">リテラル、変数、型</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3>プリミティブ型<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Groovyでは、原則として、プリミティブ型がそのまま使われることはなく、必ず参照型（ラッパー型）として扱われる。(たとえばint型で変数を定義しても、その変数はInteger型として扱われる)</p>
</div>
<div class="section" id="id8">
<h3>ジェネリクス<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Javaのジェネリクスは、Groovyで記述してもエラーにはならないが、型チェックは行われない。ただし、コンパイル後のclassファイルには型情報が含まれるため、Javaから呼び出す場合はコンパイル時に型チェックが行われる。</p>
</div>
<div class="section" id="id9">
<h3>小数リテラル<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>小数リテラルは、接尾詞を指定しない限りBigDecimal型 (固定小数点数)として扱われる。</p>
<p>浮動小数点数として扱いたい場合は、接尾詞<tt class="docutils literal"><span class="pre">f</span></tt>（Float型）または<tt class="docutils literal"><span class="pre">d</span></tt>（Double型）を付加する。</p>
</div>
<div class="section" id="id10">
<h3>文字列リテラル<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>文字列リテラルを記述する際に使用する引用符は、Javaと意味が異なる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="c1">// シングルクォート:通常の文字列(Javaと異なり、char型リテラルではない)</span>
<span class="kt">def</span> <span class="n">str1</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span>

<span class="c1">// 「as char」を付記するとchar型リテラルになる</span>
<span class="kt">def</span> <span class="n">char1</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span> <span class="k">as</span> <span class="kt">char</span>

<span class="c1">// ダブルクォート:「$変数名」または「${式}」が含まれる場合は評価結果の値で置換される</span>
<span class="kt">def</span> <span class="n">str2</span> <span class="o">=</span> <span class="s2">&quot;a $str1&quot;</span>          <span class="c1">// &#39;a abc&#39; と等価</span>

<span class="c1">// スラッシュ: 「\」がエスケープ文字として扱われない以外はダブルクォートと同様</span>
<span class="kt">def</span> <span class="n">str3</span> <span class="o">=</span> <span class="s">/a\bcd/</span>            <span class="c1">// &#39;a\\bcd&#39; と等価</span>

<span class="c1">// 三連シングルクォート: 改行を含む文字列</span>
<span class="kt">def</span> <span class="n">str4</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;line1</span>
<span class="s1">line2&#39;&#39;&#39;</span>

<span class="c1">// 三連ダブルクォート: 改行を含む文字列($の置換あり)</span>
<span class="kt">def</span> <span class="n">str5</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;line1 $str1</span>
<span class="s2">line2&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>なお、ダブルクォートやスラッシュで記述される文字列リテラルはGString型となる。「$変数名」や「${式}」が変化する(Immutableでない) 場合、GStringはString型として評価された時点で値が確定する。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;init&quot;</span>
<span class="kt">def</span> <span class="n">b</span> <span class="o">=</span> <span class="s2">&quot;$a&quot;</span>
<span class="n">a</span> <span class="o">=</span> <span class="s2">&quot;change&quot;</span>
<span class="n">println</span> <span class="n">b</span>   <span class="c1">// change と表示される</span>
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h3>コレクションリテラル<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>以下の記述で配列オブジェクトが生成される。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="n">l</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">]</span>
</pre></div>
</div>
<p>Javaの場合、変数宣言時に限り、<tt class="docutils literal"><span class="pre">Integer[]</span> <span class="pre">l</span> <span class="pre">=</span> <span class="pre">new</span> <span class="pre">Integer[]</span> <span class="pre">{1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">4}</span></tt>のような記述が可能だが、角括弧による配列リテラルは、変数宣言以外でも記述可能。</p>
<p>配列リテラルのあとに `` as List`` を付加することで、List (java.util.ArrayList)のインスタンスを取得できる。</p>
<p>Map（連想配列）のリテラルは以下のように記述する。(java.util.LinkedHashMapインスタンスが得られる)</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="n">newMap</span> <span class="o">=</span> <span class="o">[</span><span class="n">key1</span> <span class="o">:</span> <span class="n">value1</span><span class="o">,</span> <span class="n">key2</span> <span class="o">:</span> <span class="n">value2</span><span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id12">
<h3>マルチ代入<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>配列やリストの内容を、一度に複数の変数に展開・代入ができる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">]</span> <span class="c1">// aに1, bに2 が代入される</span>
</pre></div>
</div>
<p>変数の数がリストの要素数より多い場合、余った変数にはnullが代入される。</p>
</div>
<div class="section" id="id13">
<h3>バインディング変数とローカル変数<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>スクリプト内に限り、型名や<tt class="docutils literal"><span class="pre">def</span></tt>キーワードを付けずに変数宣言・初期化を行う事ができる。このようにして宣言した変数は<em>バインディング変数</em>となる。</p>
<p>対して、メソッドやクラス定義内、クロージャ内で定義する変数をローカル変数と呼ぶ。また、スクリプト内であっても、型名や<tt class="docutils literal"><span class="pre">def</span></tt>キーワードで宣言した変数はローカル変数と呼ぶ。</p>
<p>ソースコードの見た目上、スクリプトはクラスやメソッドといった構造の最上位に見えるが、スクリプト内で定義したローカル変数は、クラスやメソッド内からはアクセス出来ない。(スクリプトのコードはコンパイル時に内部でprivateメソッドに括られるため)</p>
<p>このため、クラスやメソッド内からも参照できるグローバルスコープの変数を定義する場合はバインディング変数として定義する必要がある。</p>
</div>
</div>
<div class="section" id="id14">
<h2><a class="toc-backref" href="#id29">演算子</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id15">
<h3>比較演算子<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>Javaでは、例えば<tt class="docutils literal"><span class="pre">==</span></tt>のような比較演算子は、インスタンスが同一かどうかで判定を行うため、プリミティブ型以外で値が同一かどうかを判定する場合はequalsメソッドを用いる必要があった。</p>
<p>Groovyにおいては、<tt class="docutils literal"><span class="pre">==</span></tt>を使った比較では、内部的にequalsメソッドが呼び出されるため、値が同一かどうかの判定となる。</p>
<p>また、不等号での比較の際も、内部でcompareToメソッドが呼び出される。このため、たとえオリジナルのクラスであっても、 java.lang.Comparableインタフェースさえ実装していれば、不等号による比較を行えるようになる。</p>
</div>
<div class="section" id="null">
<h3>nullセーフナビゲーション<a class="headerlink" href="#null" title="Permalink to this headline">¶</a></h3>
<p>通常、オブジェクトのフィールドやメソッドにアクセスする場合は<tt class="docutils literal"><span class="pre">a.b</span></tt>のように記述するが、<tt class="docutils literal"><span class="pre">a?.b</span></tt>のように、<tt class="docutils literal"><span class="pre">?.</span></tt>演算子を使用すると、aがnullであってもNullPointerExceptionを発生せず、単にnullを返す。</p>
</div>
<div class="section" id="elvis">
<h3>条件演算子（三項演算子、Elvis演算子）<a class="headerlink" href="#elvis" title="Permalink to this headline">¶</a></h3>
<p>条件演算子<tt class="docutils literal"><span class="pre">a</span> <span class="pre">?</span> <span class="pre">b</span> <span class="pre">:</span> <span class="pre">c</span></tt>は、Javaにおいては条件節にboolean型以外の値を指定するとコンパイルエラーとなるが、Groovyではbooleanである必要がない（そもそも型チェックされない）。boolean以外の場合、null、数値の0、長さ0の文字列などがfalse扱いとなる。</p>
<p>また、条件節とtrueの場合の評価結果が同じになる（例えば<tt class="docutils literal"><span class="pre">a</span> <span class="pre">?</span> <span class="pre">a</span> <span class="pre">:</span> <span class="pre">b</span></tt>)ような場合、<tt class="docutils literal"><span class="pre">a</span> <span class="pre">?:</span> <span class="pre">b</span></tt>という略記が可能。(これをElvis演算子と呼ぶ)</p>
</div>
<div class="section" id="id16">
<h3>リスト展開演算子<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<p>ある配列やリストの中に、別の配列やリストをフラットに展開したい場合、リスト展開演算子<tt class="docutils literal"><span class="pre">*</span></tt>を用いる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="n">a</span> <span class="o">=</span> <span class="o">[</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">5</span><span class="o">]</span>
<span class="kt">def</span> <span class="n">b</span> <span class="o">=</span> <span class="o">[</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="o">*</span><span class="n">a</span><span class="o">,</span> <span class="mi">6</span><span class="o">]</span>   <span class="c1">// aがb内に展開されて [1, 2, 3, 4, 5, 6] となる</span>
</pre></div>
</div>
</div>
<div class="section" id="id17">
<h3>展開ドット演算子<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<p>例えば、Stringの配列があった場合、以下のような構文で、配列内の各要素の長さを配列として取得することができる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="n">strAry</span> <span class="o">=</span> <span class="o">[</span><span class="s2">&quot;abcd&quot;</span><span class="o">,</span><span class="s2">&quot;efg&quot;</span><span class="o">,</span><span class="s2">&quot;hijk&quot;</span><span class="o">]</span>
<span class="kt">def</span> <span class="n">sizeArray</span> <span class="o">=</span> <span class="n">strAry</span><span class="o">*.</span><span class="na">size</span><span class="o">()</span>
    <span class="c1">// [strAry[0].size(), strAry[1].size(), strAry[2].size()] と同じ</span>
</pre></div>
</div>
<p>このような演算子<tt class="docutils literal"><span class="pre">*.</span></tt>を「展開ドット演算子」と呼ぶ。</p>
</div>
<div class="section" id="id18">
<h3>包含演算子<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p>SQLのIN演算子のようなもの。右辺の値が、左辺の配列やリストに含まれていればtrueを返す。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="n">contains</span> <span class="o">=</span> <span class="s1">&#39;a&#39;</span> <span class="k">in</span> <span class="o">[</span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="s1">&#39;b&#39;</span><span class="o">,</span><span class="s1">&#39;c&#39;</span><span class="o">]</span>  <span class="c1">// true</span>
</pre></div>
</div>
<p>また、左辺にPattern型（正規表現を扱う型）の値を記述すれば、正規表現にマッチしたかどうか判定できる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kt">def</span> <span class="n">match</span> <span class="o">=</span> <span class="s2">&quot;abcd&quot;</span> <span class="k">in</span> <span class="o">~</span><span class="s">/.*bc.*/</span>  <span class="c1">// true (~/ ... / は、Pattern型リテラル)</span>
</pre></div>
</div>
<p>包含演算子は、左辺のオブジェクトの isCase メソッドを呼び出す(<tt class="docutils literal"><span class="pre">a</span> <span class="pre">in</span> <span class="pre">b</span></tt>は<tt class="docutils literal"><span class="pre">b.isCase(a)</span></tt>と等価) ので、独自クラスであっても、isCaseメソッドを実装すれば、包含演算子による演算が可能。</p>
</div>
<div class="section" id="id19">
<h3>演算子オーバーロード<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<p>参考：<a class="reference external" href="http://www.ibm.com/developerworks/jp/java/library/j-pg10255/">http://www.ibm.com/developerworks/jp/java/library/j-pg10255/</a></p>
<p>Java では、プリミティブ型以外の数値型(BigDecimal等)に対しては通常の数学的演算子(+,* など)が使用できず、add や multply 、equals などのメソッドを使用する必要があるが、Groovy では BigDecimal や BigInteger などの数値型でも数学的演算子が利用可能。</p>
<p>また、演算子は以下のようなメソッドに対応しており、対応するメソッドを定義しておけば、任意のクラスで数学的演算子による演算が可能になる。</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">演算子</th>
<th class="head">メソッド</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>a + b</td>
<td>a.plus(b)</td>
</tr>
<tr class="row-odd"><td>a - b</td>
<td>a.minus(b)</td>
</tr>
<tr class="row-even"><td>a * b</td>
<td>a.multiply(b)</td>
</tr>
<tr class="row-odd"><td>a / b</td>
<td>a.divide(b)</td>
</tr>
<tr class="row-even"><td>a ** b</td>
<td>a.power(b)</td>
</tr>
<tr class="row-odd"><td>a % b</td>
<td>a.mod(b)</td>
</tr>
<tr class="row-even"><td>a | b</td>
<td>a.or(b)</td>
</tr>
<tr class="row-odd"><td>a &amp; b</td>
<td>a.and(b)</td>
</tr>
<tr class="row-even"><td>a ^ b</td>
<td>x.xor(b)</td>
</tr>
<tr class="row-odd"><td>a++ or ++a</td>
<td>a.next()</td>
</tr>
<tr class="row-even"><td>a-- or --a</td>
<td>a.previous()</td>
</tr>
<tr class="row-odd"><td>a &lt;&lt; b</td>
<td>a.leftShift(b)</td>
</tr>
<tr class="row-even"><td>a &gt;&gt; b</td>
<td>a.rightShift(b)</td>
</tr>
<tr class="row-odd"><td>a &gt;&gt;&gt; b</td>
<td>a.rightShiftUnsignd(b)</td>
</tr>
<tr class="row-even"><td>a[b]</td>
<td>a.getAt(b)</td>
</tr>
<tr class="row-odd"><td>a[b] = c</td>
<td>a.putAt(b, c)</td>
</tr>
<tr class="row-even"><td>a in b</td>
<td>b.isCase(a)</td>
</tr>
<tr class="row-odd"><td>a as b</td>
<td>a.asType(b)</td>
</tr>
<tr class="row-even"><td>~a</td>
<td>a.bitwiseNegate()</td>
</tr>
<tr class="row-odd"><td>-a</td>
<td>a.negative()</td>
</tr>
<tr class="row-even"><td>+a</td>
<td>a.positive()</td>
</tr>
<tr class="row-odd"><td>a == b</td>
<td>a.equals()</td>
</tr>
<tr class="row-even"><td>a &lt;=&gt; b</td>
<td>a.compareTo(b)</td>
</tr>
<tr class="row-odd"><td>a(任意の引数)</td>
<td>a.call(任意の引数)</td>
</tr>
</tbody>
</table>
<div class="highlight-groovy"><div class="highlight"><pre><span class="kd">class</span> <span class="nc">Hoge</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">n</span>

  <span class="n">Hoge</span> <span class="nf">plus</span><span class="o">(</span><span class="n">Hoge</span> <span class="n">a</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">Hoge</span><span class="o">(</span><span class="nl">n:</span> <span class="k">this</span><span class="o">.</span><span class="na">n</span> <span class="o">+</span> <span class="n">a</span><span class="o">.</span><span class="na">n</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="n">String</span> <span class="nf">toString</span><span class="o">(){</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kt">def</span> <span class="n">one</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Hoge</span><span class="o">(</span><span class="nl">n:</span> <span class="mi">1</span><span class="o">)</span>
<span class="kt">def</span> <span class="n">two</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Hoge</span><span class="o">(</span><span class="nl">n:</span> <span class="mi">2</span><span class="o">)</span>

<span class="n">println</span> <span class="n">one</span> <span class="o">+</span> <span class="n">two</span>  <span class="c1">// &quot;3&quot;と出力される</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id20">
<h2><a class="toc-backref" href="#id30">制御構造</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<p>制御構造の構文もJavaと同じ物が使用出来るが、Groovy独自のものを以下に挙げる。</p>
<div class="section" id="id21">
<h3>繰り返し<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<p>Javaの通常のfor文、拡張for文の両方が利用できる。Groovyでは<tt class="docutils literal"><span class="pre">0..10</span></tt>のような記法で数値のリストを生成できるため、これを利用して以下の様な記述ができる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="nl">i:</span> <span class="mi">0</span><span class="o">..</span><span class="mi">10</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// iが0から10まで繰り返される</span>
<span class="o">}</span>
</pre></div>
</div>
<p>また、Groovy独自の構文として以下の形式が利用できる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..</span><span class="mi">10</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// iが0から10まで繰り返される</span>
<span class="o">}</span>
</pre></div>
</div>
<p>どちらも同じ動作になるが、後者はループ変数の宣言が不要。（前者の場合は、変数が事前に宣言されているか、for文の中で型もしくはdefキーワードをつけて宣言しなければいけない）</p>
</div>
<div class="section" id="switch-case">
<h3>switch-case<a class="headerlink" href="#switch-case" title="Permalink to this headline">¶</a></h3>
<p>switch-caseは、Javaのものと比べて多機能になっている。一般的には、caseのあとの条件に指定されたオブジェクトのisCaseメソッドを呼び出し、trueが帰れば、直後の処理を実行するようになっている。</p>
<p>isCaseメソッドは数値や列挙型(enum)はもちろん、文字列、配列やリスト、Pattern（正規表現オブジェクト）に用意されているので、これらはそのままswitch-caseの条件として利用できる。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="k">switch</span> <span class="o">(</span><span class="n">x</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">case</span> <span class="s2">&quot;abc&quot;</span><span class="o">:</span>        <span class="c1">// xが文字列&quot;abc&quot;に等しい場合</span>
    <span class="c1">// 処理</span>
    <span class="k">break</span>

  <span class="k">case</span> <span class="o">~</span><span class="s">/.*bc.*/</span>     <span class="c1">// xが正規表現「.*bc.*」にマッチする場合</span>
    <span class="c1">// 処理</span>
    <span class="k">break</span>

  <span class="k">case</span> <span class="o">[</span><span class="s2">&quot;abc&quot;</span><span class="o">,</span><span class="s2">&quot;def&quot;</span><span class="o">,</span><span class="s2">&quot;kkk&quot;</span><span class="o">]</span>  <span class="c1">//配列の要素いずれかと等しい場合</span>
    <span class="c1">// 処理</span>
    <span class="k">break</span>

  <span class="k">case</span> <span class="mi">1</span><span class="o">..</span><span class="mi">10</span>          <span class="c1">//1～10の範囲に含まれる場合</span>
    <span class="c1">// 処理</span>
    <span class="k">break</span>

  <span class="k">default</span><span class="o">:</span>
    <span class="c1">// デフォルト処理</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
<div class="section" id="return">
<h3>return文<a class="headerlink" href="#return" title="Permalink to this headline">¶</a></h3>
<p>関数やメソッドの末尾にあるreturn文については、<tt class="docutils literal"><span class="pre">return</span></tt>キーワードを省略できる。</p>
<p>Groovyでは、<tt class="docutils literal"><span class="pre">return</span></tt>キーワードの有無にかかわらず、最後に評価された式の結果が暗黙的に戻り値として返される。ただし、<tt class="docutils literal"><span class="pre">return</span></tt>は、Java同様、関数やメソッドの動作を途中で打ち切る効果を持つ。</p>
</div>
<div class="section" id="assert">
<h3>assert文<a class="headerlink" href="#assert" title="Permalink to this headline">¶</a></h3>
<p>Groovyの<tt class="docutils literal"><span class="pre">assert</span></tt>は、実行時オプションで無効化できない。</p>
<p>また、<tt class="docutils literal"><span class="pre">assert</span></tt>の条件に違反が合った場合は、<tt class="docutils literal"><span class="pre">PowerAssertionError</span></tt>例外が発生し、Javaの<tt class="docutils literal"><span class="pre">AssertionError</span></tt>に比べて詳細なエラーメッセージが出力される。</p>
</div>
<div class="section" id="id22">
<h3>例外<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<p>Groovyでは、チェック例外を持つメソッドを呼ぶ場合でも、必ずしも例外処理を記述する必要はない。この場合、呼び出し先のメソッドでチェック例外が発生すると、更に上流へ同じ例外をそのままthrowする。</p>
<p>また、メソッド宣言時に<tt class="docutils literal"><span class="pre">throws</span></tt>でチェック例外を明示する場合、Groovy内では意味が無いが、コンパイル後にJavaから呼び出す場合は、例外処理チェックが行われる。</p>
<p>catch文に記述する例外変数名に型を記述しない場合、暗黙的に<tt class="docutils literal"><span class="pre">java.lang.Exception</span></tt>型でcatchする。</p>
<div class="highlight-groovy"><div class="highlight"><pre><span class="k">try</span> <span class="o">{</span>
  <span class="c1">// 例外を発生する処理</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>  <span class="c1">// catch(Exception e) と同じ</span>
  <span class="c1">//例外処理</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">基礎</a><ul>
<li><a class="reference internal" href="#id2">記述と実行</a></li>
<li><a class="reference internal" href="#id3">ライブラリのインポート</a></li>
<li><a class="reference internal" href="#groovy-jdk">Groovy JDK</a></li>
<li><a class="reference internal" href="#groovy">Groovy の文法について</a><ul>
<li><a class="reference internal" href="#id4">括弧、セミコロンの省略</a></li>
<li><a class="reference internal" href="#id5">型記述の省略</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">リテラル、変数、型</a><ul>
<li><a class="reference internal" href="#id7">プリミティブ型</a></li>
<li><a class="reference internal" href="#id8">ジェネリクス</a></li>
<li><a class="reference internal" href="#id9">小数リテラル</a></li>
<li><a class="reference internal" href="#id10">文字列リテラル</a></li>
<li><a class="reference internal" href="#id11">コレクションリテラル</a></li>
<li><a class="reference internal" href="#id12">マルチ代入</a></li>
<li><a class="reference internal" href="#id13">バインディング変数とローカル変数</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id14">演算子</a><ul>
<li><a class="reference internal" href="#id15">比較演算子</a></li>
<li><a class="reference internal" href="#null">nullセーフナビゲーション</a></li>
<li><a class="reference internal" href="#elvis">条件演算子（三項演算子、Elvis演算子）</a></li>
<li><a class="reference internal" href="#id16">リスト展開演算子</a></li>
<li><a class="reference internal" href="#id17">展開ドット演算子</a></li>
<li><a class="reference internal" href="#id18">包含演算子</a></li>
<li><a class="reference internal" href="#id19">演算子オーバーロード</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id20">制御構造</a><ul>
<li><a class="reference internal" href="#id21">繰り返し</a></li>
<li><a class="reference internal" href="#switch-case">switch-case</a></li>
<li><a class="reference internal" href="#return">return文</a></li>
<li><a class="reference internal" href="#assert">assert文</a></li>
<li><a class="reference internal" href="#id22">例外</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="setup_groovy_emacs.html"
                        title="previous chapter">GroovyインストールとEmacsへのgroovy-mode設定</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="groovy_functional.html"
                        title="next chapter">関数型プログラミング</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/basic.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="groovy_functional.html" title="関数型プログラミング"
             >next</a> |</li>
        <li class="right" >
          <a href="setup_groovy_emacs.html" title="GroovyインストールとEmacsへのgroovy-mode設定"
             >previous</a> |</li>
        <li><a href="index.html">Groovy memo</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Kazuyuki ono(@shout_poor).
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>